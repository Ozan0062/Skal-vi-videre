@page "/"
@inject IJSRuntime JSRuntime

<h3>Google Map Example</h3>

<button @onclick="LoadMap" class="btn btn-primary">Load Map</button>
<div id="@MapContainerId" style="height: 400px; width: 100%;" hidden></div>

@code {
    [Parameter] public double Latitude { get; set; } = 55.630846563348534; // Default latitude
    [Parameter] public double Longitude { get; set; } = 12.078656210578572; // Default longitude
    [Parameter] public string MapContainerId { get; set; } = "homeMap";

    private bool isMapLoaded = false;

    private async Task LoadMap()
    {
        if (!isMapLoaded)
        {
            isMapLoaded = true;

            // Remove the 'hidden' attribute from the map container
            await JSRuntime.InvokeVoidAsync("eval", $"document.getElementById('{MapContainerId}').removeAttribute('hidden');");

            // Call JavaScript function to initialize the map
            await JSRuntime.InvokeVoidAsync("initMap", MapContainerId, Latitude, Longitude);
        }
    }
}
